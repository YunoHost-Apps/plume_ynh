/* to generate the password, in a shell */

apt install python-bcrypt
python -c 'import bcrypt; print(bcrypt.hashpw("PASSWORD", bcrypt.gensalt(log_rounds=10)))'

/* to generate the keypair, in a shell */

openssl genrsa -passout pass:PASSWORD -out private.pem 2048
openssl rsa -in private.pem -passin pass:PASSWORD -pubout -out public.pub

/** private.pem now contains the private key, public.pub the public one **/

/* SQL command to create the user */

INSERT INTO users (
    username,
    display_name,
    outbox_url,
    inbox_url,
    is_admin,
    summary,
    email,
    hashed_password,
    instance_id,
    ap_url,
    public_key,
    private_key,
    shared_inbox_url,
    followers_endpoint,
    avatar_id,
) VALUES (
    username,
    display_name,
    'https://' || domain_name || '/@/' || username || '/outbox',
    'https://' || domain_name || '/@/' || username || '/inbox',
    't',
    'Admin of ' || instance_name,
    email,
    hashed_password,
    1,
    'https://' || domain_name || '/@/' || username,
    pub_key,
    priv_key,
    'https://' || domain_name || '/inbox',
    'https://' || domain_name || '/inbox',
    NULL
);
